{% extends 'base.html' %}

{% block content %}
<h1>ğŸ  ì˜ˆì¸¡ ê²°ê³¼</h1>

<!-- âœ… ê²°ê³¼ë¥¼ í‘œì‹œí•  div ì¶”ê°€ -->
<div id="result">
    <p>ì˜ˆì¸¡ ê²°ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
</div>

<button onclick="goBack()">â¬… ë’¤ë¡œ ê°€ê¸°</button>

<script>
    function getQueryParams() {
        const params = new URLSearchParams(window.location.search);
        return JSON.parse(params.get("predictions") || "[]");
    }

    function displayResults() {
        const predictions = getQueryParams();
        const resultDiv = document.getElementById("result");

        if (!resultDiv) {
            console.error("ğŸš¨ `id="result"` ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. HTMLì„ í™•ì¸í•˜ì„¸ìš”.");
            return;
        }

        if (!predictions.length) {
            resultDiv.innerHTML = "<p style='color:red;'>âŒ ì˜ˆì¸¡ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>";
            return;
        }

        let tableHTML = `
            <table border="1" class="table table-striped">
                <thead>
                    <tr>
                        <th>ë²ˆí˜¸</th>
                        <th>ì˜ˆì¸¡ ê²°ê³¼</th>
                    </tr>
                </thead>
                <tbody>
        `;

        predictions.forEach((pred, index) => {
            tableHTML += `
                <tr>
                    <td>${index + 1}</td>
                    <td>${pred}</td>
                </tr>
            `;
        });

        tableHTML += `</tbody></table>`;
        resultDiv.innerHTML = `<h3>ğŸ“Š ì˜ˆì¸¡ ê²°ê³¼</h3>${tableHTML}`;
    }

    function goBack() {
        window.history.back();
    }

    window.onload = displayResults;
</script>
{% endblock %}
